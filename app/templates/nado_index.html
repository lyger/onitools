{% extends "onitools_layout.html" %}

{% from "onitools_layout.html" import flashed %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css') }}">
{% endblock %}

{% block title %}Nado name generator{% endblock %}

{% block body %}
<div class="inner-frame">
	{{ flashed() }}
	<h2>Nado name generator</h2>

	<form class="form-inline">
		<label for="nadoGenerator">Generate:</label>
		<select class="form-control ml-2" id="nadoGenerator">
			<option disabled selected value="NULLOPTION"></option>
		{% for genCat, genList in generators.items() %}
			<optgroup label="{{ genCat }}">
			{% for generator in genList %}
				<option value="{{ generator }}">{{ generator }}</option>
			{% endfor %}
			</optgroup>
		{% endfor %}
		</select>

		<label class="ml-4" for="nadoNumber">How many:</label>
		<select class="form-control ml-2" id="nadoNumber">
		{% for num in [10, 20, 30] %}
			<option value="{{ num }}">{{ num }}</option>
		{% endfor %}
		</select>

		<button class="btn btn-secondary align-bottom ml-4" id="nadoSubmit" type="button" disabled>Generate</button>
	</form>

	<div class="card mt-4 mb-4">
		<div class="card-body">
			<ul class="list-group list-group-flush" id="nadoNames">
			</ul>
			<form id="nadoSuggestForm" class="form-inline mt-3" style="display: none;">
				<input type="text" class="form-control" placeholder="Suggest a name" id="nadoSuggestText">
				<input type="submit" class="btn btn-secondary ml-2" id="nadoSuggestBtn" disabled>
			</form>
		</div>
	</div>

	<p>
		<a data-toggle="collapse" href="#nadoExplanation" role="button" aria-expanded="false" aria-controls="nadoExplanation">
			<i class="fa fa-info-circle" aria-hidden="true"></i> Nado?
		</a>
	</p>
	<div class="collapse" id="nadoExplanation">
		<div class="card card-body">
			<p>"Nado" comes from the Japanese word for "et cetera", and is a machine learning word generator that learns from examples and produces similar words.</p>

			<p>For those interested in the internals, Nado's model is a character-based long short term memory (LSTM) neural network. The generative model is trained on cross-entropy loss over the training data, and output is generated with a beam search of width 2.</p>
		</div>
	</div>

</div> <!-- /inner-frame -->
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='nado_index.js') }}"></script>
{% endblock %}